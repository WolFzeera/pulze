<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modus Operandi - O Nosso Labirinto</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #000; color: #fff; min-height: 100vh; overflow-x: hidden; position: relative; font-family: 'Poppins', sans-serif; }
        .stars { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        .star { position: absolute; background: #fff; border-radius: 50%; animation: twinkle linear infinite; }
        @keyframes twinkle { 0%, 100% { opacity: 0.2; } 50% { opacity: 1; } }
        .galaxy { position: fixed; top: 50%; left: 50%; width: 300px; height: 300px; border-radius: 50%; background: radial-gradient(circle at center, rgba(79, 172, 254, 0.2) 0%, transparent 70%); transform: translate(-50%, -50%); z-index: -1; animation: rotate 120s linear infinite; }
        @keyframes rotate { 0% { transform: translate(-50%, -50%) rotate(0deg); } 100% { transform: translate(-50%, -50%) rotate(360deg); } }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; z-index: 1; position: relative; }
        header { display: flex; flex-direction: column; align-items: center; padding: 20px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
        .logo { font-family: 'Cinzel', serif; font-size: 3.5rem; font-weight: 700; background: linear-gradient(90deg, #4facfe, #00f2fe); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow: 0 0 20px rgba(79, 172, 254, 0.5); margin-bottom: 10px; animation: glow 3s ease-in-out infinite alternate; }
        @keyframes glow { 0% { text-shadow: 0 0 10px rgba(79, 172, 254, 0.5); } 100% { text-shadow: 0 0 20px rgba(79, 172, 254, 0.8), 0 0 30px rgba(79, 172, 254, 0.6); } }
        nav ul { display: flex; list-style: none; gap: 20px; flex-wrap: wrap; justify-content: center; margin-top: 15px; }
        nav a { color: #a0a0e0; text-decoration: none; font-size: 1.1rem; transition: color 0.3s ease; position: relative; padding: 5px 0; font-family: 'Playfair Display', serif; }
        nav a:hover { color: #4facfe; }
        nav a::after { content: ''; position: absolute; bottom: 0; left: 0; width: 0; height: 2px; background: linear-gradient(90deg, #4facfe, #00f2fe); transition: width 0.3s ease; }
        nav a:hover::after { width: 100%; }
        .podcast-header { text-align: center; padding: 40px 0; }
        .podcast-info { background: rgba(30, 30, 60, 0.6); border-radius: 20px; padding: 25px; margin: 0 auto 40px; max-width: 800px; backdrop-filter: blur(10px); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2); border: 1px solid rgba(79, 172, 254, 0.3); display: flex; flex-direction: column; align-items: center; }
        .podcast-cover { width: 250px; height: 250px; border-radius: 15px; margin-bottom: 20px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5); }
        .podcast-title { font-size: 2.2rem; margin-bottom: 15px; color: #00f2fe; font-family: 'Playfair Display', serif; }
        .podcast-description { color: #a0a0e0; line-height: 1.6; text-align: center; margin-bottom: 20px; }
        .episodes-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 25px; margin-top: 40px; }
        .episode { background: rgba(30, 30, 60, 0.6); border-radius: 20px; padding: 25px; transition: all 0.3s ease; backdrop-filter: blur(10px); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2); border: 1px solid rgba(79, 172, 254, 0.3); }
        .episode:hover { transform: translateY(-5px); box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3), 0 0 30px rgba(79, 172, 254, 0.5); }
        .episode-cover { width: 100%; border-radius: 10px; margin-bottom: 15px; }
        .episode-title { font-size: 1.4rem; margin-bottom: 10px; color: #4facfe; font-family: 'Playfair Display', serif; }
        .episode-date { color: #a0a0e0; font-size: 0.9rem; margin-bottom: 15px; }
        .episode-description { color: #a0a0e0; line-height: 1.6; font-size: 0.95rem; margin-bottom: 20px; max-height: 100px; overflow-y: auto; }
        .episode-description::-webkit-scrollbar { width: 5px; }
        .episode-description::-webkit-scrollbar-thumb { background: #4facfe; border-radius: 10px; }
        .episode-player { width: 100%; height: 40px; border-radius: 5px; margin-top: 15px; }
        .loading { text-align: center; padding: 40px; color: #4facfe; font-size: 1.2rem; }
        footer { text-align: center; padding: 30px 0; color: #a0a0e0; margin-top: 40px; border-top: 1px solid rgba(255, 255, 255, 0.1); font-size: 0.9rem; }
        @media (max-width: 768px) {
            .logo { font-size: 2.5rem; }
            nav ul { gap: 15px; }
            nav a { font-size: 1rem; }
            .podcast-cover { width: 200px; height: 200px; }
            .podcast-title { font-size: 1.8rem; }
            .episodes-container { grid-template-columns: 1fr; }
        }
        @media (max-width: 480px) {
            .logo { font-size: 2rem; }
            .podcast-cover { width: 150px; height: 150px; }
            .podcast-title { font-size: 1.5rem; }
            .episode { padding: 20px; }
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    <div class="galaxy"></div>
    
    <div class="container">
        <header>
            <div class="logo">O Nosso Labirinto</div>
            <nav>
                <ul>
                    <li><a href="index.html">Salão Principal</a></li>
                    <li><a href="biblioteca.html">Biblioteca</a></li>
                    <li><a href="fonoteca.html">Fonoteca</a></li>
                    <li><a href="cofre.html">Cofre</a></li>
                    <li><a href="podcast.html">Podcast</a></li>     
                </ul>
            </nav>
        </header>
        
        <div class="podcast-header">
            <div class="podcast-info" id="podcastInfo">
                <div class="loading">
                    <i class="fas fa-spinner fa-spin"></i> Carregando informações do podcast...
                </div>
            </div>
            
            <div class="episodes-container" id="episodesContainer">
                <div class="loading">
                    <i class="fas fa-spinner fa-spin"></i> Carregando episódios...
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <p>Santuário Digital "O Nosso Labirinto" - Podcast Modus Operandi</p>
    </footer>

    <script>
        // Configurações da API do Spotify
        const clientId = '852c9ff456774cefb4fb8d25127236df';
        const clientSecret = '6f56e884bd784cbba8d131321719507e';
        const podcastId = '1k2AsiW1iHQBnqOVcmmWDW';
        
        // Elementos DOM
        const podcastInfo = document.getElementById('podcastInfo');
        const episodesContainer = document.getElementById('episodesContainer');
        
        // Criar estrelas de fundo
        function createStars() {
            const stars = document.getElementById('stars');
            const count = 150;
            
            for (let i = 0; i < count; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.width = `${Math.random() * 3}px`;
                star.style.height = star.style.width;
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.animationDuration = `${Math.random() * 3 + 2}s`;
                star.style.animationDelay = `${Math.random() * 2}s`;
                stars.appendChild(star);
            }
        }
        
        // Obter token de acesso do Spotify
        async function getAccessToken() {
            try {
                const response = await fetch('https://accounts.spotify.com/api/token', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                        'Authorization': 'Basic ' + btoa(clientId + ':' + clientSecret)
                    },
                    body: 'grant_type=client_credentials'
                });
                
                const data = await response.json();
                return data.access_token;
            } catch (error) {
                console.error('Erro ao obter token:', error);
                return null;
            }
        }
        
        // Buscar informações do podcast
        async function fetchPodcastInfo(token) {
            try {
                const response = await fetch(`https://api.spotify.com/v1/shows/${podcastId}`, {
                    headers: {
                        'Authorization': 'Bearer ' + token
                    }
                });
                
                return await response.json();
            } catch (error) {
                console.error('Erro ao buscar informações do podcast:', error);
                return null;
            }
        }
        
        // Buscar episódios do podcast
        async function fetchEpisodes(token) {
            try {
                const response = await fetch(`https://api.spotify.com/v1/shows/${podcastId}/episodes?limit=50`, {
                    headers: {
                        'Authorization': 'Bearer ' + token
                    }
                });
                
                const data = await response.json();
                return data.items;
            } catch (error) {
                console.error('Erro ao buscar episódios:', error);
                return null;
            }
        }
        
        // Exibir informações do podcast
        function displayPodcastInfo(podcast) {
            podcastInfo.innerHTML = `
                <img src="${podcast.images[0].url}" alt="${podcast.name}" class="podcast-cover">
                <h2 class="podcast-title">${podcast.name}</h2>
                <p class="podcast-description">${podcast.description}</p>
            `;
        }
        
        // Exibir episódios
        function displayEpisodes(episodes) {
            if (!episodes || episodes.length === 0) {
                episodesContainer.innerHTML = '<div class="loading">Nenhum episódio encontrado.</div>';
                return;
            }
            
            episodesContainer.innerHTML = '';
            
            episodes.forEach(episode => {
                const episodeElement = document.createElement('div');
                episodeElement.className = 'episode';
                
                episodeElement.innerHTML = `
                    ${episode.images && episode.images.length > 0 ? 
                        `<img src="${episode.images[0].url}" alt="${episode.name}" class="episode-cover">` : ''}
                    <h3 class="episode-title">${episode.name}</h3>
                    <p class="episode-date">${new Date(episode.release_date).toLocaleDateString('pt-BR')} • ${Math.floor(episode.duration_ms / 60000)} min</p>
                    <div class="episode-description">${episode.description || 'Sem descrição disponível.'}</div>
                    <iframe class="episode-player" src="https://open.spotify.com/embed/episode/${episode.id}" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
                `;
                
                episodesContainer.appendChild(episodeElement);
            });
        }
        
        // Inicializar a página
        async function initPage() {
            createStars();
            
            const token = await getAccessToken();
            if (!token) {
                podcastInfo.innerHTML = '<div class="loading">Erro ao conectar com o Spotify.</div>';
                return;
            }
            
            const podcast = await fetchPodcastInfo(token);
            if (podcast) {
                displayPodcastInfo(podcast);
            } else {
                podcastInfo.innerHTML = '<div class="loading">Erro ao carregar informações do podcast.</div>';
            }
            
            const episodes = await fetchEpisodes(token);
            if (episodes) {
                displayEpisodes(episodes);
            } else {
                episodesContainer.innerHTML = '<div class="loading">Erro ao carregar episódios.</div>';
            }
        }
        
        // Iniciar
        initPage();
    </script>
</body>
</html>